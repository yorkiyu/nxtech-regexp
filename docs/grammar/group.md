# 分组

对模式进行分组，实现分组捕获与非捕获匹配

## 分组字符集

<table>
  <thead>
    <tr>
      <th style="text-align:left">&#x5B57;&#x7B26;</th>
      <th style="text-align:left">&#x542B;&#x4E49;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">(x)</td>
      <td style="text-align:left">
        <ul>
          <li>&#x5339;&#x914D; x&#x5E76;&#x4E14;&#x6355;&#x83B7;&#x5339;&#x914D;&#x9879;&#xFF0C;&#x79F0;&#x4E3A;&#x6355;&#x83B7;&#x62EC;&#x53F7;</li>
          <li>&#x88AB;&#x5339;&#x914D;&#x7684;&#x5B50;&#x5B57;&#x7B26;&#x4E32;&#x53EF;&#x4EE5;&#x5728;&#x7ED3;&#x679C;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20; <code>[1]...[n]</code> &#x4E2D;&#x627E;&#x5230;</li>
          <li>&#x6216;&#x5728;&#x88AB;&#x5B9A;&#x4E49;&#x7684; <code>RegExp</code> &#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027; <code>$1...$9</code> &#x4E2D;&#x8BBF;&#x95EE;&#x5230;</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">(?&lt;key&gt;expression)</td>
      <td style="text-align:left">
        <ul>
          <li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7EC4;&#x540D;&#x65B9;&#x4FBF;&#x7684;&#x8BBF;&#x95EE;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x7EC4;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x6570;&#x7F16;&#x53F7;</li>
          <li>key&#xFF1A;&#x4E3A;&#x7EC4;&#x540D;</li>
          <li>expression&#xFF1A;&#x4E3A;&#x5206;&#x7EC4;&#x8868;&#x8FBE;&#x5F0F;</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="text-align:left">(?:x)</td>
      <td style="text-align:left">
        <ul>
          <li>&#x5339;&#x914D; x&#x4E0D;&#x4F1A;&#x6355;&#x83B7;&#x5339;&#x914D;&#x9879;&#xFF0C;&#x79F0;&#x4E3A;&#x975E;&#x6355;&#x83B7;&#x62EC;&#x53F7;</li>
          <li>&#x5339;&#x914D;&#x9879;&#x4E0D;&#x80FD;&#x591F;&#x4ECE;&#x7ED3;&#x679C;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20; <code>[1]...[n]</code>
          </li>
          <li>&#x6216;&#x5DF2;&#x88AB;&#x5B9A;&#x4E49;&#x7684; <code>RegExp</code> &#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027; <code>$1...$9</code> &#x518D;&#x6B21;&#x8BBF;&#x95EE;&#x5230;</li>
        </ul>
        <p></p>
      </td>
    </tr>
  </tbody>
</table>

## 分组模式

### 普通捕获组

> 捕获组的括号从左到右编号，正则引擎会记录每个分组匹配内容，并允许在模式或替换字符串中引用它

```javascript
/([\d]{4})-([\d]{2})-([\d]{2})/.exec("2019-07-02"); // 捕获年月日
/**
匹配结果数组：["2019-07-02", "2019", "07", "02", index: 0, input: "2019-07-02", groups: undefined]
数据[0]：完整匹配字符串
数组[1]：捕获“年”
数组[2]：捕获“月”
数组[3]：捕获“日”
**/
```

如下图所示，捕获组的编号是按照“\(”出现的顺序，从左到右，从1开始进行编号

![](../.gitbook/assets/image%20%2820%29.png)

![](../.gitbook/assets/image%20%2813%29.png)

### 嵌套捕获组

> 捕获分组括号允许嵌套，在这种情况下，捕获数据组编号也从左到右编号

```javascript
/(([\d]{4})-([\d]{2})-([\d]{2})) ([\d:]+)/.exec("2019-07-02 10:45:28"); // 捕获日期，年月日，时间
/**
匹配结果数组：["2019-07-02 10:45:28", "2019-07-02", "2019", "07", "02", "10:45:28", index: 0, input: "2019-07-02 10:45:28", groups: undefined]
数据[0]：完整匹配字符串
数组[1]：捕获“日期”
数组[2]：捕获“年”
数组[3]：捕获“月”
数组[4]：捕获“日”
数组[5]：捕获“时间”
**/
```

如下图所示，嵌套捕获组的编号也是按照“\(”出现的顺序，从左到右，从1开始进行编号

![](../.gitbook/assets/image%20%2841%29.png)

![](../.gitbook/assets/image%20%2816%29.png)

### 命名捕获组 

> 通过给捕获组中的括号命名，可以方便访问到指定的组，而不需要去一个个的数编号

```javascript
/(?<date>(?<y>[\d]{4})-(?<m>[\d]{2})-(?<d>[\d]{2})) (?<time>[\d:]+)/.exec("2019-07-02 10:45:28");
// 捕获分组命名：date：日期，y：年，m：月，d：日，time：时间
/**
匹配结果数组：
    [
        "2019-07-02 10:45:28", 
        "2019-07-02", 
        "2019", 
        "07", 
        "02", 
        "10:45:28", 
        index: 0, 
        input: "2019-07-02 10:45:28", 
        groups: {
            y: "2019", 
            m: "07", 
            d: "02", 
            date: "2019-07-02", 
            time: "10:45:28"
        }
    ]
数据[0]：完整匹配字符串
数组[1]：捕获“日期”
数组[2]：捕获“年”
数组[3]：捕获“月”
数组[4]：捕获“日”
数组[5]：捕获“时间”
groups.date：捕获“日期”
groups.y：捕获“年”
groups.m：捕获“月”
groups.d：捕获“日”
groups.time：捕获“时间”
**/
```

命名捕获组语法结构和普通分组类型，仅在分组前多了?&lt;key&gt;结构，其中key值为当前分组的名称

![](../.gitbook/assets/image%20%2818%29.png)

### 非捕获组

> 指括号分组中的内容无需捕获，不出现在匹配结果数组元素中；当我们需要括号来正确应用量词，但不希望使用分组结果中的内容，则可使用非捕获组

```javascript
/(?:([\d]{4})-([\d]{2})-([\d]{2})) (?:[\d:]+)/.exec("2019-07-02 10:45:28");
// 捕获年月日
/**
匹配结果数组：["2019-07-02 10:45:28", "2019", "07", "02", index: 0, input: "2019-07-02 10:45:28", groups: undefined]
数据[0]：完整匹配字符串
数组[1]：捕获“年”
数组[2]：捕获“月”
数组[3]：捕获“日”
**/
```

使用非捕获组的表达式，匹配的文本将不会进入到匹配结果数组中，分组也就不会被编排

![](../.gitbook/assets/image%20%2810%29.png)

![](../.gitbook/assets/image%20%2830%29.png)

